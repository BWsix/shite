(this.webpackJsonptester004_1=this.webpackJsonptester004_1||[]).push([[0],{104:function(t,e,n){},108:function(t,e,n){},110:function(t,e,n){},111:function(t,e,n){},112:function(t,e,n){},224:function(t,e,n){},225:function(t,e,n){},226:function(t,e,n){var c={"./dark.css":[229,3],"./light.css":[230,4]};function o(t){if(!n.o(c,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=c[t],o=e[0];return n.e(e[1]).then((function(){return n.t(o,7)}))}o.keys=function(){return Object.keys(c)},o.id=226,t.exports=o},227:function(t,e,n){"use strict";n.r(e);var c=n(2),o=n.n(c),r=n(96),s=n.n(r),i=(n(104),n(3)),a=n(27),u=n(8),l=n(6),d=(n(228),n(63),n(97)),j=n(17),b=n.n(j),f=n(28),O=function(){var t=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new l.a.auth.GoogleAuthProvider,t.next=3,pt.signInWithRedirect(e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(f.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt.signOut();case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){pt.signInAnonymously()},p=function(){var t=Object(f.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt.signOut();case 2:return t.next=4,O();case 4:window.location.reload();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=(n(108),n(23),n(1)),g=function(){return Object(x.jsxs)("div",{className:"Login",children:[Object(x.jsx)("h1",{className:"Login-title",children:"Shite."}),Object(x.jsx)("button",{className:"btn-thick btn-round",onClick:O,children:"\ud83d\udca9 Login with Google \ud83d\udca9"}),Object(x.jsx)("button",{className:"btn-thick btn-round btn-top",onClick:m,children:"\ud83d\udca9 Login anonymously \ud83d\udca9"})]})},v=n(48),y=n.n(v),w=n(231),C=function(){return JSON.parse(localStorage.getItem("userInfo"))||(localStorage.setItem("userInfo",JSON.stringify({_:{name:"",avatar:""}})),{_:{name:"",avatar:""}})},S=function(t){var e=C();if(t in e)return{name:e[t].name,avatar:e[t].avatar}},N=function(t,e,n){C(),function(t,e,n){var c=JSON.parse(localStorage.getItem("userInfo"));c[t]={name:e,avatar:n},localStorage.setItem("userInfo",JSON.stringify(c))}(t,e,n)},I=function(t){if(!t.isAnonymous){N(t.uid,t.displayName,t.photoURL);var e=mt.collection("users").doc(t.uid);e.get().then((function(n){n.exists?e.update({name:t.displayName,avatar:t.photoURL}):e.set({name:t.displayName,avatar:t.photoURL,bio:"",cover:"",following:[t.uid],posts:[]})}))}},k=function(t){return t.trim().replace(/[\r\n]/g,"n_n_")},E=(n(110),function(t){var e=t.image_str,n=t.setImage_str,o=t.title,r=t.title_cancel,s=Object(c.useRef)(null),i=function(t){return new Promise((function(e){y.a.imageFileResizer(t,650,750,"JPEG",100,0,(function(t){e(t)}),"base64")}))},a=function(){var t=Object(f.a)(b.a.mark((function t(e){var c,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.target.files[0],t.next=3,i(c);case 3:o=t.sent,n(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("label",{htmlFor:"image_uploader",className:"Upload btn-thin btn-sharp",children:Object(x.jsx)("small",{children:e?"Choose another":o||"Add an Image"})}),Object(x.jsx)("input",{type:"file",ref:s,accept:"image/x-png, image/jpeg",id:"image_uploader",style:{display:"none"},onChange:function(t){t.target.value.length&&a(t)}}),e&&Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-left",onClick:function(){n(""),s.current.value=""},children:Object(x.jsx)("small",{children:r||"Remove"})})]})}),A=(n(111),function(t){var e=t.content,n=t.setContent,o=t.rows,r=t.publishButton,s=t.placeholder,a=void 0===s?"What's on your mind, folk?":s,u=t.style,l=Object(c.useState)((function(){return 1})),d=Object(i.a)(l,2),j=d[0],b=d[1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("textarea",{value:e,rows:Math.max(j+1,o||3),className:"InputField",style:u,placeholder:r?"Enter: publish\nShift+Enter: new line":a,onChange:function(t){n(t.target.value),b(t.target.value.split("\n").length)},onKeyDown:function(t){r&&("Enter"!==t.key||t.shiftKey||t.preventDefault())},onKeyUp:function(t){r&&("Enter"!==t.key||t.shiftKey||r.current.click())}})})}),_=function(t){var e=t.content,n="";return"loading"===e?n="Loading...":"error"===e&&(n="Error."),Object(x.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"60px"},children:Object(x.jsxs)("span",{style:{textAlign:"center"},children:["\ud83d\udca9 ",n.length?n:e," \ud83d\udca9"]})})},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(c.useState)(""),o=Object(i.a)(n,2),r=o[0],s=o[1],a=Object(c.useState)("https://i.imgur.com/xicaprt.png"),u=Object(i.a)(a,2),l=u[0],d=u[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),f=b[0],O=b[1],h=Object(c.useState)("https://i.imgur.com/PZxq3zy.png"),m=Object(i.a)(h,2),p=m[0],x=m[1],g=Object(c.useState)(!1),v=Object(i.a)(g,2),y=v[0],w=v[1];return Object(c.useEffect)((function(){var n=S(t);n?(s((function(t){return n.name})),d((function(t){return n.avatar}))):mt.collection("users").doc(t).get().then((function(e){if(!e.exists)return w(!0);s(e.get("name")),d(e.get("avatar")),N(t,e.get("name"),e.get("avatar"))})),e&&mt.collection("users").doc(t).get().then((function(t){if(!t.exists)return w(!0);O(t.get("bio")),x(t.get("cover")||"https://i.imgur.com/PZxq3zy.png")}))}),[t]),{name:r,avatar:l,bio:f,cover:p,error:y}},B=(n(112),function(t){var e=t.type,n=t.uid,c=t.redirect,o=t.withName,r=t.hover,s=P(n),i=s.name,u=s.avatar,l="small"===e?35:"large"===e?55:void 0,d=Object(x.jsx)("img",{src:u,alt:i,className:r?"UserIcon UserIcon-hover":"UserIcon",title:c?"go to "+i+"' page":void 0,style:{width:l,height:l}});return c&&(d=Object(x.jsx)(a.b,{to:"/user/".concat(n),children:d})),o&&(d=Object(x.jsxs)("div",{className:"UserIcon-withName",children:[d,Object(x.jsx)("div",{className:"UserIcon-Name",children:Object(x.jsx)("b",{children:i})})]})),d}),T=n(99),F=n.n(T),D=(n(224),function(t){var e=t.content,n=t.center,c=t.markdown;return Object(x.jsx)(x.Fragment,{children:c?Object(x.jsx)("div",{className:"ParseContent-url",children:Object(x.jsx)(F.a,{children:e.replaceAll("n_n_n_n_","\n\n&nbsp;\n\n").replaceAll("n_n_","\n\n")})}):e.split("n_n_").map((function(t){return Object(x.jsxs)("div",{className:"ParseContent-line ParseContent-url",style:n&&{display:"flex",justifyContent:"center"},children:[t.split(" ").map((function(t){return Object(x.jsx)("span",{className:"ParseContent-word",children:t.startsWith("https://")||t.startsWith("http://")?Object(x.jsx)("a",{href:t,children:t+String.fromCharCode(160)}):t+String.fromCharCode(160)},Object(w.a)())})),Object(x.jsx)("br",{})]},Object(w.a)())}))})}),L=function(t){var e=t.content;return Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(x.jsxs)("button",{className:"btn-thick btn-sharp",onClick:p,children:["Login with Google and ",e]})})},R=(n(37),n(38),function(){var t=Object(c.useContext)(xt),e=Object(c.useState)(""),n=Object(i.a)(e,2),o=n[0],r=n[1],s=Object(c.useState)(""),a=Object(i.a)(s,2),u=a[0],d=a[1],j=Object(c.useState)(!1),O=Object(i.a)(j,2),h=O[0],m=O[1],p=function(t){return new Promise((function(e){y.a.imageFileResizer(t,650,750,"JPEG",100,0,(function(t){e(t)}),"base64")}))};return Object(x.jsxs)("div",{className:"Post-outer",style:{width:"100%",margin:"calc(1vh + 15px) 0",borderRadius:"10px"},onPaste:function(){var t=Object(f.a)(b.a.mark((function t(e){var n,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clipboardData.files[0]){t.next=2;break}return t.abrupt("return");case 2:return n=e.clipboardData.files[0],t.next=5,p(n);case 5:c=t.sent,d(c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(x.jsxs)("div",{style:{padding:"10px"},children:[Object(x.jsx)(B,{type:"large",uid:t.uid,withName:!0}),Object(x.jsxs)("div",{className:"Post-content",children:[Object(x.jsx)("div",{style:{marginBottom:"10px"},children:Object(x.jsx)(A,{content:o,setContent:r,rows:4})}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(E,{image_str:u,setImage_str:d}),Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsxs)("button",{className:"btn-thin btn-sharp ShiteCount-".concat(h?"trigger":"btn"),onClick:function(){return m((function(t){return!t}))},children:["markdown(",h?"o":"x",")"]}),Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-left",onClick:function(){if(!o.trim().length&&!u)return r("");!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];mt.collection("posts").add({content:k(e),author:t,createdAt:l.a.firestore.FieldValue.serverTimestamp(),image:n,shiters:[],comments:[],markdown:c}).then((function(e){mt.collection("activities").doc("posts").update({type:"add",postId:e.id,uuid:Object(w.a)()}),mt.collection("users").doc(t).update({posts:l.a.firestore.FieldValue.arrayUnion(e.id)})}))}(t.uid,o,u,h),r(""),d(""),m(!1)},children:"Publish"})]})]})]})]}),u&&Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(x.jsx)("img",{src:u,alt:"img",style:{maxWidth:"100%",height:"auto"}})})]})}),U=n(34),M=o.a.createContext({}),J=function(){var t=Object(c.useContext)(M).post;return Object(x.jsx)("div",{className:"Post-content",children:Object(x.jsx)(D,{content:t.content,markdown:t.markdown})})},W=function(){var t=Object(c.useContext)(xt),e=Object(c.useContext)(M).post,n=Object(c.useState)((function(){return e.shiters.includes(t.uid)})),o=Object(i.a)(n,2),r=o[0],s=o[1];return Object(x.jsxs)("button",{style:{height:"100%",width:"90%"},className:"ShiteCount-btn btn-sharp ".concat(r?"ShiteCount-trigger":""),onClick:function(){t.isAnonymous?window.alert("login with google and give this post a shite!"):(!function(t,e,n){var c=mt.collection("posts").doc(e);c.get().then((function(e){"shite"===n?c.update({shiters:l.a.firestore.FieldValue.arrayUnion(t)}):c.update({shiters:l.a.firestore.FieldValue.arrayRemove(t)})}))}(t.uid,e.postId,r?"unshite":"shite"),s((function(t){return!t})))},title:r?void 0:"give this post a shite!",children:["\ud83d\udca9 ",e.shiters.length-(e.shiters.includes(t.uid)?r?0:1:r?-1:0)]})},z=function(t){var e=t.createdAt;return Object(x.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",color:"gray"},children:[Object(x.jsxs)("span",{style:{display:"inline-block"},children:[e.toLocaleDateString(),", "]}),Object(x.jsx)("span",{style:{display:"inline-block"},children:e.toLocaleTimeString()})]})},V=function(t){var e=t.setToggleComments,n=t.commentCount;return Object(x.jsxs)("button",{style:{height:"100%",width:"90%"},className:"btn-sharp ".concat(n?"":"ShiteCount-btn"),onClick:function(){return e(!0)},children:["comments ",n]})},G=function(t){var e=t.setToggleComments,n=Object(c.useContext)(M).post;return Object(x.jsxs)("div",{className:"Post-stats",children:[Object(x.jsx)("div",{className:"ShiteCount",children:Object(x.jsx)(W,{})}),Object(x.jsx)("div",{children:Object(x.jsx)(V,{setToggleComments:e,commentCount:n.comments?n.comments.length:0})}),Object(x.jsx)("div",{className:"TimePosted-outer",children:Object(x.jsx)(z,{createdAt:n.createdAt})})]})},K=function(t,e){mt.collection("posts").doc(e).update({content:k(t)}).then((function(){l.a.firestore().collection("activities").doc("posts").update({type:"edit",postId:e,uuid:Object(w.a)()})}))},Y=function(t){var e=t.toggleEdit,n=t.setToggleEdit,o=t.editedContent,r=Object(c.useContext)(xt),s=Object(c.useContext)(M).post;return e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{className:"btn-thin btn-round",onClick:function(){return n(!1)},children:Object(x.jsx)("small",{children:"cancel"})}),Object(x.jsx)("button",{className:"btn-thin btn-round btn-left",onClick:function(){o.trim().length&&(K(o.trim(),s.postId),n(!1))},children:Object(x.jsx)("small",{children:"save"})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{className:"btn-thin btn-round",onClick:function(){n(!0)},children:Object(x.jsx)("small",{children:"edit"})}),Object(x.jsx)("button",{className:"btn-thin btn-round btn-left",onClick:function(){var t,e;confirm("delete this post?")&&(t=s.postId,e=r.uid,mt.collection("posts").doc(t).get().then((function(n){n.get("comments").forEach((function(t){mt.collection("comments").doc(t).delete()})),mt.collection("posts").doc(t).delete(),mt.collection("users").doc(e).update({posts:l.a.firestore.FieldValue.arrayRemove(t)})})),mt.collection("activities").doc("posts").update({postId:t,type:"delete",uuid:Object(w.a)()}))},children:Object(x.jsx)("small",{children:"delete"})})]})},q=function(t){var e=t.editedContent,n=t.setEditedContent,c=t.markdown;return Object(x.jsxs)("div",{className:"Post-content",style:{marginBottom:"10px"},children:[c?"(markdown)":void 0,Object(x.jsx)(A,{content:e,setContent:n,rows:Math.max(e.split("\n").length+1,4)})]})},Z=function(t){var e=t.postId,n=Object(c.useState)("share"),o=Object(i.a)(n,2),r=o[0],s=o[1];return Object(x.jsx)("button",{className:"btn-thin btn-round btn-left",title:"copy to clipboard",onClick:function(){navigator.clipboard.writeText(window.location.origin+"/post/"+e),s("copied!")},children:Object(x.jsx)("small",{children:r})})},H=function(t){var e;try{return!!(e=t.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=|\/sandalsResorts#\w\/\w\/.*\/))([^\\/&]{10,12})/))&&e[1]}catch(n){return!1}},X=function(t){var e=t.content;return Object(x.jsx)("div",{style:{width:"100%",aspectRatio:"16/9"},children:Object(x.jsx)("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/".concat(H(e)),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})},Q=(n(59),function(t){var e=t.cmt,n=t.commentSectionRef,o=t.atBottom,r=Object(c.useRef)(null),s=P(e.comment.author).name;if(e.is_new&&o){var i=n.current;i&&i.scrollTo(0,i.scrollHeight)}return Object(x.jsxs)("div",{ref:r,className:"Comment ".concat(e.is_new?"Comment-new":""),children:[Object(x.jsx)(B,{type:"small",uid:e.comment.author,redirect:!0,hover:!0}),Object(x.jsxs)("div",{className:"Comment-text",children:[Object(x.jsxs)("b",{className:"Comment-name",children:[s," "]}),Object(x.jsxs)("span",{className:"Comment-time",children:[e.comment.createdAt.toLocaleDateString()," ",e.comment.createdAt.toLocaleTimeString()]}),Object(x.jsx)(D,{content:e.comment.content})]})]})}),$=function(t){var e=t.postId,n=Object(c.useContext)(xt),o=Object(c.useState)(""),r=Object(i.a)(o,2),s=r[0],a=r[1],u=Object(c.useRef)(null);return Object(x.jsxs)("div",{className:"AddComment Comment",children:[Object(x.jsx)(B,{type:"small",uid:n.uid}),Object(x.jsxs)("div",{style:{width:"100%",paddingLeft:"10px"},children:[Object(x.jsx)("b",{children:n.displayName}),Object(x.jsx)("div",{style:{width:"100%"},children:Object(x.jsx)(A,{content:s,setContent:a,publishButton:u})}),Object(x.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse",marginTop:"10px"},children:Object(x.jsx)("button",{style:{display:"none"},ref:u,onClick:function(){if(!s.trim().length)return a("");!function(t,e,n){mt.collection("comments").add({postId:n,content:k(t),author:e,createdAt:l.a.firestore.FieldValue.serverTimestamp(),shiters:[]}).then((function(t){l.a.firestore().collection("posts").doc(n).update({comments:l.a.firestore.FieldValue.arrayUnion(t.id)})}))}(s,n.uid,e),a("")}})})]})]})},tt=n(14),et=n(7),nt=function(t,e,n){var o=Object(c.useState)(!0),r=Object(i.a)(o,2),s=r[0],a=r[1],u=Object(c.useState)([]),d=Object(i.a)(u,2),j=d[0],b=d[1],f=Object(c.useState)([]),O=Object(i.a)(f,2),h=O[0],m=O[1],p=Object(c.useState)([]),x=Object(i.a)(p,2),g=x[0],v=x[1],y=Object(c.useState)([]),w=Object(i.a)(y,2),C=w[0],S=w[1],N=Object(c.useState)(!1),I=Object(i.a)(N,2),k=I[0],E=I[1],A=Object(c.useState)(!0),_=Object(i.a)(A,2),P=_[0],B=_[1],T=Object(c.useState)(!1),F=Object(i.a)(T,2),D=F[0],L=F[1];Object(c.useEffect)((function(){if(s)return l.a.firestore().collection("posts").doc(t).onSnapshot((function(t){if(!t.exists)return a(!1);m((function(e){return t.get("comments")})),e((function(e){return Object(et.a)(Object(et.a)({},e),{},{comments:t.get("comments"),shiters:t.get("shiters")})}))}))}),[s]);return Object(c.useEffect)((function(){h.length&&(C.length?h.filter((function(t){return!C.includes(t)})).filter((function(t){return!g.includes(t)})).forEach((function(t){!function(t){v((function(e){return[t].concat(Object(tt.a)(e))})),l.a.firestore().collection("comments").doc(t).get().then((function(t){b((function(e){return[].concat(Object(tt.a)(e.map((function(t){return{comment:t.comment,is_new:!1}}))),[{comment:Object(et.a)(Object(et.a)({},t.data()),{},{commentId:t.id,createdAt:t.get("createdAt").toDate()}),is_new:!0}])}))})).catch((function(t){L(!0)}))}(t)})):(S(h),B(!1),E(!0)))}),[h]),Object(c.useEffect)((function(){k&&(E(!1),C.filter((function(t){return!g.includes(t)})).slice(-10).reverse().forEach((function(t){return function(t){v((function(e){return[].concat(Object(tt.a)(e),[t])})),l.a.firestore().collection("comments").doc(t).get().then((function(t){b((function(e){return[{comment:Object(et.a)(Object(et.a)({},t.data()),{},{commentId:t.id,createdAt:t.get("createdAt").toDate()}),is_new:!1}].concat(Object(tt.a)(e.map((function(t){return{comment:t.comment,is_new:!1}}))))}))})).catch((function(t){L(!0)}))}(t)})))}),[k]),Object(c.useEffect)((function(){h.length===g.length&&B(!0)}),[h,g]),{comments:j,setToggle:E,end:P,error:D}},ct=function(t,e){var n=Object(c.useState)(),o=Object(i.a)(n,2),r=o[0],s=o[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),l=u[0],d=u[1];Object(c.useEffect)((function(){return mt.collection("activities").doc("posts").onSnapshot((function(t){s(t.data())}))}),[]),Object(c.useEffect)((function(){if(r&&t){if(""===l)return d(r.uuid);if(r.uuid!==l)if(d(r.uuid),"add"===r.type){if(t.find((function(t){return t.postId===r.postId})))return;mt.collection("posts").doc(r.postId).get().then((function(t){e((function(e){return[Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()})].concat(Object(tt.a)(e))}))}))}else if("delete"===r.type){if(!t.find((function(t){return t.postId===r.postId})))return;e(t.filter((function(t){return t.postId!==r.postId})))}else if("edit"===r.type){if(!t.find((function(t){return t.postId===r.postId})))return;mt.collection("posts").doc(r.postId).get().then((function(t){e((function(e){return e.map((function(e){return e.postId!==r.postId?e:Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()})}))}))}))}}}),[r,t,l])},ot=function(){var t=Object(c.useContext)(xt),e=Object(c.useContext)(M),n=e.post,o=e.setPost,r=nt(n.postId,o),s=r.comments,a=r.setToggle,u=r.end,l=r.error,d=Object(c.useRef)(null),j=Object(c.useState)(!0),b=Object(i.a)(j,2),f=b[0],O=b[1];return l?Object(x.jsx)(_,{content:"error"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{ref:d,className:"Post Comment-outer",id:"infinite-comment-scroll"+n.postId,onScroll:function(){var t=d.current;t&&t.scrollTop>-60?!1===f&&O(!0):!0===f&&O(!1)},children:s&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{dataLength:s.length,next:function(){return a(!0)},hasMore:!u,inverse:!0,scrollableTarget:"infinite-comment-scroll"+n.postId,loader:null,children:s.map((function(t,e){return e===s.length-1?Object(x.jsx)(Q,{cmt:t,commentSectionRef:d,atBottom:f},t.comment.commentId):Object(x.jsx)(Q,{cmt:t,commentSectionRef:d},t.comment.commentId)}))}),Object(x.jsx)("div",{className:"Comment",children:u?null:"loading..."})]})}),Object(x.jsx)("div",{className:"Comment-scroll-to-bottom-outer",children:!f&&Object(x.jsx)("button",{className:"Comment-scroll-to-bottom btn-thin btn-round btn-border",onClick:function(){var t=d.current;t&&t.scrollTo(0,t.scrollHeight)},children:"scroll to bottom"})}),Object(x.jsx)("div",{className:"Post",children:t.isAnonymous?Object(x.jsx)(L,{content:"leave a comment!"}):Object(x.jsx)($,{postId:n.postId})})]})},rt=function(t){var e=t._post,n=t.redirect,o=Object(c.useContext)(xt),r=Object(c.useState)(""),s=Object(i.a)(r,2),a=s[0],u=s[1],l=Object(c.useState)(!1),d=Object(i.a)(l,2),j=d[0],b=d[1],f=Object(c.useState)(!1),O=Object(i.a)(f,2),h=O[0],m=O[1],p=Object(c.useState)((function(){return e})),g=Object(i.a)(p,2),v=g[0],y=g[1];return Object(c.useEffect)((function(){y(e),u(e.content.replaceAll("n_n_","\n"))}),[e]),Object(x.jsx)(M.Provider,{value:{post:v,setPost:y},children:Object(x.jsxs)("div",{className:"Post-outer",style:{width:"100%",margin:"calc(1vh + 15px) 0",borderRadius:"10px"},children:[Object(x.jsxs)("div",{style:{padding:"10px"},children:[Object(x.jsxs)("div",{className:"Post-content-upper",children:[Object(x.jsx)(B,{type:"large",uid:v.author,withName:!0,redirect:!1!==n||void 0,hover:!1!==n||void 0}),Object(x.jsxs)("div",{style:{display:"flex"},children:[o.uid===v.author&&Object(x.jsx)(Y,{toggleEdit:h,setToggleEdit:m,editedContent:a}),Object(x.jsx)(Z,{postId:v.postId})]})]}),h?Object(x.jsx)(q,{editedContent:a,setEditedContent:u,markdown:v.markdown}):Object(x.jsx)(J,{})]}),v.image&&Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(x.jsx)("img",{src:v.image,alt:"just an img",style:{maxWidth:"100%",height:"auto"}})}),!v.image.length&&H(v.content)&&Object(x.jsx)(X,{content:v.content}),Object(x.jsx)("div",{className:"Post-strike"}),Object(x.jsx)(G,{setToggleComments:b}),j&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"Post-strike"}),Object(x.jsx)(ot,{})]})]})})},st=function(t){var e=t.POSTS,n=e.posts,c=e.setPosts,o=e.setToggle,r=e.end,s=e.error;return ct(n,c),s?Object(x.jsx)(_,{content:"error"}):Object(x.jsx)("div",{children:Object(x.jsx)(U.a,{dataLength:n.length,next:function(){return o(!0)},hasMore:!r,loader:Object(x.jsx)(_,{content:"loading"}),endMessage:Object(x.jsx)(_,{content:"you've reached the end of the internet"}),children:n.map((function(t){return Object(x.jsx)(rt,{_post:t},t.postId)}))})})},it=function(t){var e=t.POSTS,n=Object(c.useContext)(xt);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),n.isAnonymous?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(L,{content:"write some posts!"})}):Object(x.jsx)(R,{}),Object(x.jsx)(st,{POSTS:e})]})},at=(n(95),function(t){var e=t.toggle,n=Object(c.useContext)(xt),o=function(){var t=localStorage.getItem("color"),e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return t?"dark"===t?"light":"dark":"dark"===e?"light":"dark"};return Object(x.jsxs)("div",{className:"Menu-DropDown-Items",style:{display:e?"":"none"},children:[!n.isAnonymous&&Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-top btn-border",children:Object(x.jsx)(a.b,{to:"/user/".concat(n.uid),children:"My posts"})}),Object(x.jsxs)("button",{className:"btn-thin btn-sharp btn-top btn-border",onClick:function(){return t=o(),localStorage.setItem("color",t),void window.location.reload();var t},children:[o()," mode"]}),Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-top btn-border",onClick:function(){return localStorage.clear()},children:"Clear cache"}),Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-top btn-border",onClick:function(){I(n),h()},children:"Logout"})]})}),ut=function(){var t=Object(c.useContext)(xt),e=Object(c.useState)(!1),n=Object(i.a)(e,2),o=n[0],r=n[1],s=function(){var t=Object(c.useState)("up"),e=Object(i.a)(t,2),n=e[0],o=e[1];return Object(c.useEffect)((function(){var t=window.pageYOffset,e=!1,n=function(){var n=window.pageYOffset;Math.abs(n-t)<20||(o(n>t?"up":"down"),t=n>0?n:0),e=!1},c=function(){e||(window.requestAnimationFrame(n),e=!0)};return window.addEventListener("scroll",c),function(){return window.removeEventListener("scroll",c)}}),[n]),"down"===n}();return Object(x.jsx)("div",{className:"Nav-outer ".concat(s?"":"Nav-hide"),children:Object(x.jsxs)("div",{className:"Nav-inner",children:[Object(x.jsx)(a.b,{to:"/",children:Object(x.jsx)("h1",{className:"Nav-h1",children:"Shite."})}),Object(x.jsxs)("div",{className:"Menu-DropDown",onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},onFocus:function(){return r(!0)},onBlur:function(){return r(!1)},children:[Object(x.jsx)(B,{type:"large",uid:t.uid,hover:!0}),Object(x.jsx)(at,{toggle:o})]})]})})},lt=function(t,e,n){var o=Object(c.useState)(!1),r=Object(i.a)(o,2),s=r[0],a=r[1],u=Object(c.useState)([]),l=Object(i.a)(u,2),d=l[0],j=l[1],b=Object(c.useState)([]),f=Object(i.a)(b,2),O=f[0],h=f[1],m=Object(c.useState)([]),p=Object(i.a)(m,2),x=p[0],g=p[1],v=Object(c.useState)([]),y=Object(i.a)(v,2),w=y[0],C=y[1],S=Object(c.useState)(!1),N=Object(i.a)(S,2),I=N[0],k=N[1],E=Object(c.useState)(!0),A=Object(i.a)(E,2),_=A[0],P=A[1],B=Object(c.useState)(!1),T=Object(i.a)(B,2),F=T[0],D=T[1];return Object(c.useEffect)((function(){j([]),h([]),g([]),C([]),k(!1),P(!0),D(!1)}),[t]),Object(c.useEffect)((function(){if(t===e.uid&&e.isAnonymous)a(!0);else{var n=d.map((function(t){return t.postId})).filter((function(t){return!O.includes(t)}));C((function(t){return[].concat(Object(tt.a)(n),Object(tt.a)(t))})),mt.collection("users").doc(t).get().then((function(t){if(!t.exists)return D(!0);h((function(e){return t.get("posts")}))}))}}),[d]),Object(c.useEffect)((function(){O.length&&(g(O),d.length||(k(!0),P(!1)))}),[O]),Object(c.useEffect)((function(){if(I){k(!1);var t=x.filter((function(t){return!w.includes(t)})).slice(-4).reverse();C((function(e){return[].concat(Object(tt.a)(e),Object(tt.a)(t))})),t.forEach((function(t){return function(t){mt.collection("posts").doc(t).get().then((function(t){j((function(e){return[].concat(Object(tt.a)(e),[Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()})])}))})).catch((function(t){D(!0)}))}(t)}))}}),[I]),Object(c.useEffect)((function(){d.map((function(t){return t.postId})).length===x.length&&P(!0)}),[d,x]),{posts:d,setPosts:j,setToggle:k,end:_,noUser:s,error:F}},dt=(n(60),function(t){var e=t.editedBio,n=t.setEditedBio,o=t.setToggleEditBio,r=Object(c.useContext)(xt);return Object(x.jsxs)("div",{className:"Banner-BioEditor",children:[Object(x.jsx)(A,{content:e,setContent:n,placeholder:"Describe who you are",rows:5,style:{textAlign:"center"}}),Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(x.jsx)("button",{className:"btn-top btn-thin btn-sharp",onClick:function(){return o(!1)},children:"cancel"}),Object(x.jsx)("button",{className:"btn-top btn-thin btn-sharp btn-left",onClick:function(){var t,n;t=r.uid,n=e,mt.collection("users").doc(t).update({bio:k(n)}).then((function(){window.location.reload()}))},children:"Save"})]})]})}),jt=function(t){var e=t.bio,n=t.isOwner,o=Object(c.useState)(e),r=Object(i.a)(o,2),s=r[0],a=r[1],u=Object(c.useState)(!1),l=Object(i.a)(u,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){a(e.replaceAll("n_n_","\n"))}),[e]),Object(x.jsxs)(x.Fragment,{children:[e&&!d&&Object(x.jsx)("div",{className:"Banner-bio",children:Object(x.jsx)("div",{children:Object(x.jsx)(D,{content:e,center:!0})})}),n&&(d?Object(x.jsx)(dt,{editedBio:s,setEditedBio:a,setToggleEditBio:j}):Object(x.jsxs)("div",{className:"Banner-bio-edit",onClick:function(){return j(!0)},children:[Object(x.jsx)("br",{}),e?"Edit Bio":"Add Bio"]}))]})},bt=function(t){var e=t.uid,n=t.isOwner,o=t.cover,r=Object(c.useState)(""),s=Object(i.a)(r,2),a=s[0],u=s[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"Banner-cover-edit".concat(a.length?"-confirm":""),children:n&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(E,{image_str:a,setImage_str:u,title:"Edit Cover",title_cancel:"Cancel"}),a.length?Object(x.jsx)("button",{className:"btn-thin btn-sharp btn-left",onClick:function(){!function(t,e){mt.collection("users").doc(t).update({cover:e}).then((function(){window.location.reload()}))}(e,a)},children:"Upload"}):void 0]})}),Object(x.jsx)("img",{src:a.length?a:o,alt:"user's cover",className:"Banner-cover"})]})},ft=function(t){var e=t.uid,n=t.isOwner,c=P(e,!0),o=c.name,r=c.avatar,s=c.bio,i=c.cover;return c.error?Object(x.jsx)(_,{content:"error"}):Object(x.jsxs)("div",{className:"Banner",children:[Object(x.jsx)("div",{className:"Banner-upper",children:Object(x.jsx)(bt,{uid:e,isOwner:n,cover:i})}),Object(x.jsxs)("div",{className:"Banner-lower",children:[Object(x.jsx)("img",{src:r,alt:"user's avatar",className:"Banner-avatar"}),Object(x.jsx)("h1",{className:"Banner-name",children:o}),Object(x.jsx)(jt,{bio:s,isOwner:n})]})]})},Ot=function(t){var e=t.uid,n=Object(c.useContext)(xt),o=e===n.uid,r=lt(e,n),s=r.posts,i=r.setPosts,a=r.setToggle,u=r.end,l=r.noUser,d=r.error;return ct(s,i),d?Object(x.jsx)(_,{content:"error"}):l?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)(L,{content:"view your own page!"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ft,{uid:e,isOwner:o}),o&&Object(x.jsx)(R,{}),Object(x.jsx)(U.a,{dataLength:s.length,next:function(){return a(!0)},hasMore:!u,loader:Object(x.jsx)(_,{content:"loading"}),endMessage:null,children:s.map((function(t){return Object(x.jsx)(rt,{_post:t,redirect:!1},t.postId)}))}),s.length?u&&Object(x.jsx)(_,{content:"you've reached the end of the internet"}):null]})},ht=function(t){var e=function(t){var e=Object(c.useState)(),n=Object(i.a)(e,2),o=n[0],r=n[1];return Object(c.useEffect)((function(){t?mt.collection("posts").doc(t).get().then((function(t){r(Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()}))})):mt.collection("posts").orderBy("createdAt","desc").limit(1).get().then((function(t){t.forEach((function(t){r(Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()}))}))}))}),[]),o}(t.postId);return e?Object(x.jsx)(rt,{_post:e}):Object(x.jsx)(_,{content:"loading"})};n(225);l.a.apps.length||l.a.initializeApp({apiKey:"AIzaSyBjfz_a3vEm-JLHGZlYXt0AjWZWS1aYq7s",authDomain:"tester02-b908a.firebaseapp.com",projectId:"tester02-b908a",storageBucket:"tester02-b908a.appspot.com",messagingSenderId:"830501078103",appId:"1:830501078103:web:8de8da0851e0e154f8cf12"});var mt=l.a.firestore(),pt=l.a.auth(),xt=o.a.createContext({}),gt=function(){var t=Object(d.a)(pt),e=Object(i.a)(t,3),n=e[0],o=e[1],r=e[2],s=function(t,e){var n=Object(c.useState)([]),o=Object(i.a)(n,2),r=o[0],s=o[1],a=Object(c.useState)((function(){return!0})),u=Object(i.a)(a,2),l=u[0],d=u[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),f=b[0],O=b[1],h=Object(c.useState)(!1),m=Object(i.a)(h,2),p=m[0],x=m[1];return Object(c.useEffect)((function(){t&&l&&(d(!1),mt.collection("posts").orderBy("createdAt","desc").startAfter(r.length?r[r.length-1].createdAt:"").limit(e||5).get().then((function(t){t.empty&&O(!0),s((function(e){return[].concat(Object(tt.a)(e),Object(tt.a)(t.docs.map((function(t){return Object(et.a)(Object(et.a)({},t.data()),{},{postId:t.id,createdAt:t.get("createdAt").toDate()})}))))}))})).catch((function(t){x(!0)})))}),[t,l]),{posts:r,setPosts:s,setToggle:d,end:f,error:p}}(n);return r?Object(x.jsx)(_,{content:"Error"}):o?Object(x.jsx)(_,{content:"Loading"}):n?(I(n),Object(x.jsx)(xt.Provider,{value:n,children:Object(x.jsxs)(a.a,{basename:"/shite",children:[Object(x.jsx)(ut,{}),Object(x.jsx)("div",{className:"Container-outer",children:Object(x.jsx)("div",{className:"Container",children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(x.jsx)(it,{POSTS:s})}}),Object(x.jsx)(u.a,{path:"/user/:uid",exact:!0,render:function(t){var e=t.match.params.uid;return Object(x.jsx)(Ot,{uid:e})}}),Object(x.jsx)(u.a,{path:"/post/:id",exact:!0,render:function(t){var e=t.match.params.id;return Object(x.jsx)(ht,{postId:e})}}),Object(x.jsx)(u.a,{path:"",render:function(){return Object(x.jsx)(_,{content:"page not found"})}})]})})})]})})):Object(x.jsx)(g,{})};n(226)("./".concat(localStorage.getItem("color")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),".css")),s.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(gt,{})}),document.getElementById("root"))},23:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},95:function(t,e,n){}},[[227,1,2]]]);